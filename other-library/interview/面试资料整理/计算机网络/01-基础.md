01 - 基础
===

> Create by **jsliang** on **2020-09-17 15:28:00**  
> Recently revised in **2020-09-17 15:28:00**

## <a name="chapter-one" id="chapter-one"></a>一 目录

**不折腾的前端，和咸鱼有什么区别**

| 目录 |
| --- |
| [一 目录](#chapter-one) |
| <a name="catalog-chapter-two" id="catalog-chapter-two"></a>[二 前言](#chapter-two) |

## <a name="chapter-two" id="chapter-two"></a>二 前言

> [返回目录](#chapter-one)

## 内容 1：浏览器为什么要跨域

跨域的产生来源于现代浏览器所通用的同源策略，所谓同源策略，是指只有在地址的：

* 协议名
* 域名
* 端口名

均一样的情况下，才允许访问相同的 `cookie`、`localStorage`，以及访问页面的 DOM 或是发送 Ajax 请求。若在不同源的情况下访问，就称为跨域。

```
http://www.baidu.com
https://www.baidu.com
http://www.jsliang.com
http://www.baidu.com:8080
```

* `http` 端口号默认为 `80`
* `https` 端口号默认为 `443`

```
http://www.example.com:80 === http://www.example.com
https://www.example.com:443 === https://www.example.com
```

### 为什么浏览器会禁止跨域？

首先，跨域只存在于浏览器端，因为我们知道浏览器的形态是很开放的，所以我们需要对它有所限制。

其次，同源策略主要是为了保证用户信息的安全，可分为两种：`Ajax` 同源策略和 `DOM` 同源策略。

`Ajax` 同源策略主要是使得不同源的页面不能获取 `cookie` 且不能发起 `Ajax` 请求，这样在一定层度上防止了 `CSRF` 攻击。

`DOM` 同源策略也一样，它限制了不同源页面不能获取 `DOM`，这样可以防止一些恶意网站在自己的网站中利用 `iframe` 嵌入正规的网站并迷惑用户，以此来达到窃取用户信息。

## 内容 2：CORS 跨域的原理

跨域资源共享（CORS）是一种机制，是 W3C 标准。它允许浏览器向跨源服务器，发出 XMLHttpRequest 或 Fetch 请求。并且整个 CORS 通信过程都是浏览器自动完成的，不需要用户参与。

而使用这种跨域资源共享的前提是，浏览器必须支持这个功能，并且服务器端也必须同意这种 "跨域" 请求。因此实现 CORS 的关键是服务器需要服务器。

通常是有以下几个配置：

* Access-Control-Allow-Origin
* Access-Control-Allow-Methods
* Access-Control-Allow-Headers
* Access-Control-Allow-Credentials
* Access-Control-Max-Age

---

> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">jsliang 的文档库</span> 由 <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/LiangJunrong/document-library" property="cc:attributionName" rel="cc:attributionURL">梁峻荣</a> 采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a>进行许可。<br />基于<a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/LiangJunrong/document-library" rel="dct:source">https://github.com/LiangJunrong/document-library</a>上的作品创作。<br />本许可协议授权之外的使用权限可以从 <a xmlns:cc="http://creativecommons.org/ns#" href="https://creativecommons.org/licenses/by-nc-sa/2.5/cn/" rel="cc:morePermissions">https://creativecommons.org/licenses/by-nc-sa/2.5/cn/</a> 处获得。